<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://kit.fontawesome.com/9cd0043e49.js" crossorigin="anonymous"></script>
</head>

<body>
  <nav>
    <div class="logo">
      <a href="index.html">
        <img src="img/yuntech-15.png" style="height: auto;width: 400px;" alt="Yuntech Logo">
      </a>
    </div>

<div class="menu">
      <div class="menu-space"></div>
      <div><a href="index.html">é¦–é </a></div>
      <div>
        <a href="#" onclick="openHelp(event)">ä½¿ç”¨èªªæ˜</a>
      </div>

      <div id="helpOverlay"
        style="display:none; position:fixed; left:0; top:0; width:100vw; height:100vh; background:rgba(0,0,0,0.4); z-index:9998;"
        onclick="closeHelp()"></div>
      <div id="helpBox" style="display:none; position:fixed; left:50%; top:50%; transform:translate(-50%,-50%);
  background:#fff; padding:10px 20px 18px 20px; border-radius:16px; box-shadow:0 4px 28px #0003;
  z-index:9999; min-width:300px; max-width:90vw; color:#222; border: 3px solid #40BFFF;">
        <div style="text-align:right;">
          <button onclick="closeHelp()" style="font-size:1.5em;">âœ–</button>
        </div>
        <h2 style="margin:0 0 8px 0; text-align:center;">åŠŸèƒ½ä»‹ç´¹</h2>
        <ul>
          <li>é¦–é åŠŸèƒ½èˆ‡logoåŠŸèƒ½:åˆ·æ–°é é¢</li>
        </ul>
        <video controls style="width:100%;max-width:500px;margin-top:24px;">
          <source src="video/1.mp4" type="video/mp4">
        </video>
        <div style="text-align:right; margin-top:24px;">
          <button onclick="showHelpPage2()">ä¸‹ä¸€é  â–¶</button>
        </div>
      </div>

      <div id="helpBox2" style="display:none; position:fixed; left:50%; top:50%; transform:translate(-50%,-50%);
  background:#fff; padding:10px 20px 18px 20px; border-radius:16px; box-shadow:0 4px 28px #0003;
  z-index:9999; min-width:300px; max-width:90vw; color:#222; border: 3px solid #40BFFF;">
        <div style="text-align:right;">
          <button onclick="closeHelp2()" style="font-size:1.2em;">âœ–</button>
        </div>
        <h2 style="margin:0 0 8px 0; text-align:center;">å•†åº—</h2>
        <ul>
          <li style="font-size:22px; line-height:1.6; max-width:20em; word-break:break-all;">
            é»é¸å•†åº—æœƒå‡ºç¾ 5 æ¬¾è»Šå­çš„æ¨£å¼ï¼Œä½ å¯ä»¥é¸æ“‡å–œæ­¡çš„ä¸€
            å°æ¨£å¼ä¾†è·‘é›²ç§‘å¤§åœ°åœ–ã€‚
          </li>
        </ul>
        <video controls style="width:100%;max-width:500px;margin-top:24px;">
          <source src="video/2.mp4" type="video/mp4">
        </video>
        <div style="display: flex; justify-content: space-between; margin-top:16px;">
          <button onclick="showHelpPage1()">â—€ ä¸Šä¸€é </button>
          <button onclick="showHelpPage3()">ä¸‹ä¸€é  â–¶</button>
        </div>
      </div>


      <div id="helpBox3" style="display:none; position:fixed; left:50%; top:50%; transform:translate(-50%,-50%);
  background:#fff; padding:18px 10px; border-radius:16px; box-shadow:0 4px 28px #0003;
  z-index:9999; min-width:300px; max-width:90vw; color:#222; border: 3px solid #40BFFF;">
        <div style="text-align:right;">
          <button onclick="closeHelp3()" style="font-size:1.2em;">âœ–</button>
        </div>
        <h2 style="margin:0 0 8px 0; text-align:center;">ç³»é™¢ä»‹ç´¹</h2>
        <ul>
          <li style="font-size:22px; line-height:1.6; max-width:20em; word-break:break-all;">
            æŒ‰ä¸‹æ›´å¤šå¾Œå¯ä»¥é¸æ“‡ä½ æƒ³äº†è§£çš„å­¸é™¢è·Ÿç³»æ‰€æ›´å¤šè³‡è¨Šï¼Œä¸¦ä¸”ç›´æ¥å‰å¾€ç€è¦½
          </li>
        </ul>
        <video controls style="width:100%;max-width:500px;margin-top:24px;">
          <source src="video/3.mp4" type="video/mp4">
        </video>
        <div style="display: flex; justify-content: space-between; margin-top:16px;">
          <button onclick="showHelpPage2()">â—€ ä¸Šä¸€é </button>
          <button onclick="showHelpPage4()">ä¸‹ä¸€é  â–¶</button>
        </div>
      </div>

      <div id="helpBox4" style="display:none; position:fixed; left:50%; top:50%; transform:translate(-50%,-50%);
  background:#fff; padding:18px 10px; border-radius:16px; box-shadow:0 4px 28px #0003;
  z-index:9999; min-width:300px; max-width:90vw; color:#222; border: 3px solid #40BFFF;">
        <div style="text-align:right;">
          <button onclick="closeHelp4()" style="font-size:1.2em;">âœ–</button>
        </div>
        <h2 style="margin:0 0 8px 0; text-align:center;">æ›´å¤š</h2>
        <ul>
          <li style="font-size:22px; line-height:1.6; max-width:20em; word-break:break-all;">
            æŒ‰ä¸‹æ›´å¤šæœƒå¼•å°åˆ°èª²ç¨‹åœ°åœ–ç¶²ä¸¦ä¸”å¯ä»¥å†é»é¸å„å­¸é™¢è©³ç´°å…§å®¹
          </li>
        </ul>
        <video controls style="width:100%;max-width:500px;margin-top:24px;">
          <source src="video/4.mp4" type="video/mp4">
        </video>
        <div style="display: flex; justify-content: space-between; margin-top:16px;">
          <button onclick="showHelpPage3()">â—€ ä¸Šä¸€é </button>
          <button onclick="showHelpPage5()">ä¸‹ä¸€é  â–¶</button>
        </div>
      </div>

      <div id="helpBox5" style="display:none; position:fixed; left:50%; top:50%; transform:translate(-50%,-50%);
  background:#fff; padding:18px 10px; border-radius:16px; box-shadow:0 4px 28px #0003;
  z-index:9999; min-width:300px; max-width:90vw; color:#222; border: 3px solid #40BFFF;">
        <div style="text-align:right;">
          <button onclick="closeHelp5()" style="font-size:1.2em;">âœ–</button>
        </div>
        <h2 style="margin:0 0 8px 0; text-align:center;">é¸æ“‡è¦å‰å¾€çš„å­¸é™¢+ç³»æ‰€</h2>
        <ul>
          <li style="font-size:22px; line-height:1.6; max-width:20em; word-break:break-all;">
            æŒ‰ä¸‹Selcet map é¸æ“‡è¦å»çš„å­¸é™¢å†é¸æ“‡è¦å‰å¾€çš„ç³»æ‰€ï¼Œå°±æœƒæœ‰æœ€çŸ­è·¯å¾‘çš„æŒ‡å¼•è·¯ç·š
          </li>
        </ul>
        <video controls style="width:100%;max-width:500px;margin-top:24px;">
          <source src="video/5.mp4" type="video/mp4">
        </video>
        <div style="display: flex; justify-content: space-between; margin-top:16px;">
          <button onclick="showHelpPage4()">â—€ ä¸Šä¸€é </button>
          <button onclick="showHelpPage6()">ä¸‹ä¸€é  â–¶</button>
        </div>
      </div>

      <div id="helpBox6" style="display:none; position:fixed; left:50%; top:50%; transform:translate(-50%,-50%);
  background:#fff; padding:18px 10px; border-radius:16px; box-shadow:0 4px 28px #0003;
  z-index:9999; min-width:300px; max-width:90vw; color:#222; border: 3px solid #40BFFF;">
        <div style="text-align:right;">
          <button onclick="closeHelp6()" style="font-size:1.2em;">âœ–</button>
        </div>
        <h2 style="margin:0 0 8px 0; text-align:center;">å‡ºç™¼</h2>
        <ul>
          <li style="font-size:22px; line-height:1.6; max-width:20em; word-break:break-all;">
            æŒ‰ä¸‹â¡ï¸éµå°±æœƒå‡ºç™¼å‰å¾€ç›®çš„åœ°åˆ°é”ç›®çš„åœ°å°±æœƒç«‹å³åœæ­¢
          </li>
        </ul>
        <video controls style="width:100%;max-width:500px;margin-top:24px;">
          <source src="video/6.mp4" type="video/mp4">
        </video>
        <div style="display: flex; justify-content: space-between; margin-top:16px;">
          <button onclick="showHelpPage5()">â—€ ä¸Šä¸€é </button>
          <button onclick="showHelpPage7()">ä¸‹ä¸€é  â–¶</button>
        </div>
      </div>

      <div id="helpBox7" style="display:none; position:fixed; left:50%; top:50%; transform:translate(-50%,-50%);
  background:#fff; padding:18px 10px; border-radius:16px; box-shadow:0 4px 28px #0003;
  z-index:9999; min-width:300px; max-width:90vw; color:#222; border: 3px solid #40BFFF;">
        <div style="text-align:right;">
          <button onclick="closeHelp7()" style="font-size:1.2em;">âœ–</button>
        </div>
        <h2 style="margin:0 0 8px 0; text-align:center;">é¸æ“‡å…¶ä»–ç›®çš„åœ°</h2>
        <ul>
          <li style="font-size:22px; line-height:1; max-width:20em; word-break:break-all;">
            ä½ å¯ä»¥åœ¨è»Šå­åœæ­¢å¾Œé¸æ“‡å…¶ä»–ç›®çš„åœ°ä¸¦ä¸”æ­é…ğŸ›‘éµåšåœæ­¢çš„å‹•ä½œ(å‹¿åœ¨è»Šå­åœæ­¢å‰)è®Šæ›´ç›®çš„åœ°
          </li>
        </ul>
        <video controls style="width:100%;max-width:500px;margin-top:24px;">
          <source src="video/7.mp4" type="video/mp4">
        </video>
        <div style="display: flex; justify-content: space-between; margin-top:16px;">
          <button onclick="showHelpPage6()">â—€ ä¸Šä¸€é </button>
          <button onclick="showHelpPage8()">ä¸‹ä¸€é  â–¶</button>
        </div>
      </div>

      <div id="helpBox8" style="display:none; position:fixed; left:50%; top:50%; transform:translate(-50%,-50%);
  background:#fff; padding:18px 10px; border-radius:16px; box-shadow:0 4px 28px #0003;
  z-index:9999; min-width:300px; max-width:90vw; color:#222; border: 3px solid #40BFFF;">
        <div style="text-align:right;">
          <button onclick="closeHelp8()" style="font-size:1.2em;">âœ–</button>
        </div>
        <h2 style="margin:0 0 8px 0; text-align:center;">æœå°‹æ•™å®¤</h2>
        <ul>
          <li style="font-size:22px; line-height:1; max-width:20em; word-break:break-all;">
            å¦‚æœä½ åªçŸ¥é“æ•™å®¤åå­—ä½†ä¸çŸ¥é“ä½ç½®åœ¨å“ªï¼Œå°±å¯ä»¥ç”¨
            æœå°‹æ•™å®¤çš„åŠŸèƒ½ï¼Œåªéœ€è¦æ‰“ä¸Šæ•™å®¤åå­—ï¼Œå†æŒ‰ä¸‹å°èˆª
            å°±æœƒé¦¬ä¸Šå¹«ä½ æ¨¡æ“¬è·¯å¾‘ä¸¦æ‰¾åˆ°å»ºç¯‰ä½ç½®
          </li>
        </ul>

        <video controls style="width:100%;max-width:500px;margin-top:24px;">
          <source src="video/8.mp4" type="video/mp4">
        </video>
        <div style="display: flex; justify-content: space-between; margin-top:16px;">
          <button onclick="showHelpPage7()">â—€ ä¸Šä¸€é </button>
        </div>
      </div>


      

      <div class="more-menu-wrap" style="position:relative;">
        <a href="#">ç³»é™¢ä»‹ç´¹</a>
        <div id="moreMenu">
          <a href="#" style="display:block; padding:8px;" onclick="toggleSubMenu(event)">âš™ï¸å·¥ç¨‹å­¸é™¢ â–¶ </a>
          <div id="engSubMenu"
            style="display:none; position:absolute; left:100%; top:0; background:#fff; border:1px solid #ccc; min-width:140px; color:#222;">
            <a href="https://csie.yuntech.edu.tw/" target="_blank"
              style="display:block; padding:8px; color:#222;">è³‡è¨Šå·¥ç¨‹ç³»</a>
            <a href="https://uel.yuntech.edu.tw/" target="_blank"
              style="display:block; padding:8px; color:#222;">é›»å­å·¥ç¨‹ç³»</a>
            <a href="https://uee.yuntech.edu.tw/" target="_blank"
              style="display:block; padding:8px; color:#222;">é›»æ©Ÿå·¥ç¨‹ç³»</a>
            <a href="https://me.yuntech.edu.tw/" target="_blank"
              style="display:block; padding:8px; color:#222;">æ©Ÿæ¢°å·¥ç¨‹ç³»</a>
            <a href="https://ce.yuntech.edu.tw/" target="_blank"
              style="display:block; padding:8px; color:#222;">ç‡Ÿå»ºå·¥ç¨‹ç³»</a>
            <a href="https://che.yuntech.edu.tw/" target="_blank"
              style="display:block; padding:8px; color:#222;">åŒ–å­¸å·¥ç¨‹èˆ‡ææ–™å·¥ç¨‹ç³»</a>
            <a href="https://ues.yuntech.edu.tw/" target="_blank"
              style="display:block; padding:8px; color:#222;">ç’°å¢ƒèˆ‡å®‰å…¨è¡›ç”Ÿå·¥ç¨‹ç³»</a>
          </div>
          <a href="#" style="display:block; padding:8px;" onclick="toggleDesignSubMenu(event)">ğŸ¨è¨­è¨ˆå­¸é™¢ â–¶ </a>
          <div id="designSubMenu"
            style="display:none; position:absolute; left:100%; top:0; background:#fff; border:1px solid #ccc; min-width:140px; color:#222;">
            <a href="https://id.yuntech.edu.tw/" target="_blank"
              style="display:block; padding:8px; color:#222;">å·¥æ¥­è¨­è¨ˆç³»</a>
            <a href="https://vc.yuntech.edu.tw/" target="_blank"
              style="display:block; padding:8px; color:#222;">è¦–è¦ºå‚³é”è¨­è¨ˆç³»</a>
            <a href="https://gcd.yuntech.edu.tw/" target="_blank"
              style="display:block; padding:8px; color:#222;">æ•¸ä½åª’é«”è¨­è¨ˆç³»</a>
            <a href="https://cd.yuntech.edu.tw/" target="_blank"
              style="display:block; padding:8px; color:#222;">å‰µæ„ç”Ÿæ´»è¨­è¨ˆç³»</a>
            <a href="https://aid.yuntech.edu.tw/" target="_blank"
              style="display:block; padding:8px; color:#222;">å»ºç¯‰èˆ‡å®¤å…§è¨­è¨ˆç³»</a>
            <a href="https://iid.yuntech.edu.tw/" target="_blank"
              style="display:block; padding:8px; color:#222;">è·¨åŸŸæ•´åˆè¨­è¨ˆå­¸å£«å­¸ä½å­¸ç¨‹&è¨­è¨ˆæŠ€å„ªå°ˆç­</a>

          </div>
          <a href="#" style="display:block; padding:8px;" onclick="toggleMangeSubMenu(event)">ğŸª™ç®¡ç†å­¸é™¢ â–¶</a>
          <div id="mangeSubMenu"
            style="display:none; position:absolute; left:100%; top:0; background:#fff; border:1px solid #ccc; min-width:140px; color:#222;">
            <a href="https://uma.yuntech.edu.tw/" target="_blank"
              style="display:block; padding:8px; color:#222;">æœƒè¨ˆç³»</a>
            <a href="https://ba.yuntech.edu.tw/" target="_blank"
              style="display:block; padding:8px; color:#222;">ä¼æ¥­ç®¡ç†ç³»</a>
            <a href="https://umf.yuntech.edu.tw/index.html" target="_blank"
              style="display:block; padding:8px; color:#222;">è²¡å‹™é‡‘èç³»</a>
            <a href="https://www.mis.yuntech.edu.tw/" target="_blank"
              style="display:block; padding:8px; color:#222;">è³‡è¨Šç®¡ç†ç³»</a>
            <a href="https://www.iem.yuntech.edu.tw/" target="_blank"
              style="display:block; padding:8px; color:#222;">å·¥æ¥­å·¥ç¨‹èˆ‡ç®¡ç†ç³»</a>
            <a href="https://ipm.yuntech.edu.tw/" target="_blank"
              style="display:block; padding:8px; color:#222;">åœ‹éš›ç®¡ç†å­¸å£«å­¸ä½å­¸ç¨‹</a>
          </div>
          <a href="#" style="display:block; padding:8px;" onclick="toggleHasSubMenu(event)">ğŸ“äººæ–‡å­¸é™¢ â–¶</a>
          <div id="hasSubMenu"
            style="display:none; position:absolute; left:100%; top:0; background:#fff; border:1px solid #ccc; min-width:140px; color:#222;">
            <a href="https://www.dafl.yuntech.edu.tw/" target="_blank"
              style="display:block; padding:8px; color:#222;">æ‡‰ç”¨å¤–èªç³»</a>
            <a href="https://culture.yuntech.edu.tw/chc/" target="_blank"
              style="display:block; padding:8px; color:#222;">æ–‡åŒ–è³‡ç”¢ç¶­è­·ç³»</a>

          </div>
          <a href="#" style="display:block; padding:8px;" onclick="toggleFutSubMenu(event)">ğŸ¤–æœªä¾†å­¸é™¢ â–¶</a>
          <div id="futSubMenu"
            style="display:none; position:absolute; left:100%; top:0; background:#fff; border:1px solid #ccc; min-width:140px; color:#222;">
            <a href="https://bpis.yuntech.edu.tw/" target="_blank"
              style="display:block; padding:8px; color:#222;">å‰ç»å­¸å£«å­¸ä½å­¸ç¨‹</a>
            <a href="https://www.yuntechbpit.tw/" target="_blank"
              style="display:block; padding:8px; color:#222;">ç”¢æ¥­ç§‘æŠ€å­¸å£«å­¸ä½å­¸ç¨‹</a>
            <a href="https://irobot.yuntech.edu.tw/" target="_blank"
              style="display:block; padding:8px; color:#222;">æ™ºæ…§æ©Ÿå™¨äººå­¸å£«å­¸ä½å­¸ç¨‹</a>
            <a href="https://yuntech-uhx.jrbooks.com.tw:8080/index" target="_blank"
              style="display:block; padding:8px; color:#222;">é€šè­˜æ•™è‚²ä¸­å¿ƒ</a>
          </div>
        </div>
      </div>
      <div><a href="#" onclick="toggleShopMenu(event)">å•†åº—</a></div>
      <div id="shopOverlay"></div>
      <div id="shopMenu">
        <div style="font-size: 1.5em; font-weight: bold; text-align: center; margin-bottom: 16px;color: black;">
          æ­¡è¿å…‰è‡¨è«‹é¸æ“‡ä½ çš„è»Šè¼›
        </div>
        <img src="car.png" style="width:40px; height:60px; margin:8px;" onclick="selectCarImage('car.png')">
        <img src="img/helicopter.png" style="width:40px; height:60px; margin:8px;"
          onclick="selectCarImage('img/helicopter.png')">
        <img src="img/boat.png" style="width:40px; height:60px; margin:8px;" onclick="selectCarImage('img/boat.png')">
        <img src="img/race.png" style="width:40px; height:60px; margin:5px;" onclick="selectCarImage('img/race.png')">
        <img src="img/F1.png" style="width:40px; height:60px; margin:5px;" onclick="selectCarImage('img/F1.png')">
      </div>
      <div><a href="https://webapp.yuntech.edu.tw/emap/mapping/College.html" target="_blank">æ›´å¤š</a></div>
      <div class="menu-space"></div>
    </div>

    <div class="icon">
      <a href="https://www.facebook.com/yuntech/?locale=zh_TW" target="_blank" rel="noopener noreferrer">
        <i class="fa-brands fa-facebook" style="color: #ffffff;"></i>
      </a>
      <a href="https://www.youtube.com/user/YuntechVideo" target="_blank" rel="noopener noreferrer">
        <i class="fa-brands fa-youtube" style="color: #ffffff;"></i>
      </a>
      <a href="https://www.instagram.com/yuntech.nyust/" target="_blank" rel="noopener noreferrer">
        <i class="fa-brands fa-instagram" style="color: #ffffff;"></i>
      </a>
      <a href="https://www.yuntech.edu.tw" target="_blank" rel="noopener noreferrer">
        <img src="img\noback.png" style="width: 40px; height: 40px;">
      </a>
    </div>

  </nav>
  <canvas id="myCanvas"></canvas>
  <div id="controls">
    <select id="mapSelect" onchange="onMapChange()">
      <option value="">Select map</option>
      <option value="map1">å·¥ç¨‹å­¸é™¢</option>
      <option value="map2">è¨­è¨ˆå­¸é™¢</option>
      <option value="map3">ç®¡ç†å­¸é™¢</option>
      <option value="map4">äººæ–‡å­¸é™¢</option>
      <option value="map5">æœªä¾†å­¸é™¢</option>
      <option value="map6">å®¿èˆå€</option>
      <option value="map7">é‹å‹•å€</option>
      <option value="map8">è¡Œæ”¿å–®ä½</option>
    </select>

    <select id="subMapSelect" style="display:none; margin-left:10px;"></select>

    <!-- <button onclick="dispose()">ğŸ—‘ï¸</button>
    <button onclick="save()">ğŸ’¾</button>
    <button onclick="cancel()">ğŸ§¹</button>
    <button onclick="store()">ğŸ§ </button> -->

    <!-- <label for="fileInput" class="file-input-label">
      ğŸ“‚
      <input type="file" id="fileInput" accept=".world" onchange="load(event)" /> -->
    </label>

    <!-- <button onclick="openOsmPanel()">ğŸŒ</button>
    <button id="targetBtn" onclick="setMode('target')">ğŸ¯</button> -->
    <!-- <button id="btnCar" onclick="placeCar()">ğŸš™</button> -->
    <button id="offsets" onclick="dispOffsets()">â¡ï¸</button>
    <button id="stopcar" onclick="stopcar()">ğŸ›‘</button>

    <p id="kpVal"></p>

    <div id="osmPanel" style="display:none;">
      <textarea id="osmDataContainer" rows="10" cols="50" placeholder="Paste OSM data here"></textarea>
      <div>
        <button onclick="parseOsmData()">âœ”ï¸</button>
        <button onclick="closeOsmPanel()">âŒ</button>
      </div>
    </div>
  </div>

  <div id="texts">
    <input type="text" id="destinationInput" placeholder="è¼¸å…¥æ•™å®¤åç¨±" />
    <button onclick="navigateToDestination()">ğŸ” æœå°‹</button>
  </div>

  <div id="announcementOverlay" style="display:none;">
  <div id="announcementBox">
    <h2>ğŸ“– ç°¡æ˜“ä½¿ç”¨èªªæ˜</h2>
    <div style="text-align: left; font-size:1.1em; color:#555; line-height:1.5;">
      <p>ç¬¬ä¸€æ­¥ï¼šè«‹å…ˆä½¿ç”¨ã€Select mapã€‘é¸æ“‡ç›®çš„åœ°</p>
      <p>ç¬¬äºŒæ­¥ï¼šå†ä½¿ç”¨â¡ï¸æŒ‰éˆ•ï¼Œè®“è»Šè¼›ç§»å‹•</p>
      <p>âš ï¸ç‰¹åˆ¥æ³¨æ„äº‹é …: </p>
        <ol>
        <li>è»Šè¼›è¡Œé€²é–“è‹¥è¦æ›´æ”¹ç›®æ¨™è«‹æŒ‰ğŸ›‘æŒ‰éˆ•,è®“è»Šè¼›åœæ­¢,åœ¨æ›´æ”¹ç›®çš„åœ°</li>
        <li>è»Šè¼›è¡Œé€²é–“,è¦–è§’ç„¡æ³•è‡ªç”±ç§»å‹•</li>
        <li>è‹¥è»Šè¼›ä½æ–¼åœæ­¢ç‹€æ…‹,è«‹æŒ‰â¡ï¸æŒ‰éˆ•è®“è»Šè¼›é‡æ–°è¡Œé§›</li>
        <li>è‹¥æ²’ç…§ä»¥ä¸Šæ­¥é©Ÿæ“ä½œä½¿è»Šè¼›æ­»æ‰,è«‹åˆ·æ–°ç¶²é </li>
      </ol>
    </div>
    <button onclick="closeAnnouncement()">æˆ‘çŸ¥é“äº†</button>
  </div>
</div>
  <script src="js/world.js"></script>
  <script src="js/graphEditor.js"></script>
  <script src="js/viewport.js"></script>
  <script src="js/items/tree.js"></script>
  <script src="js/items/building.js"></script>
  <script src="js/items/water.js"></script>
  <script src="js/items/Pitch.js"></script>
  <script src="js/items/park.js"></script>
  <script src="js/items/grass.js"></script>
  <script src="js/items/court.js"></script>
  <script src="js/math/utils.js"></script>
  <script src="js/math/graph.js"></script>
  <script src="js/math/osm.js"></script>
  <script src="js/primitives/point.js"></script>
  <script src="js/primitives/segment.js"></script>
  <script src="js/primitives/polygon.js"></script>
  <script src="js/primitives/envelope.js"></script>

  <script src="controls.js"></script>
  <script src="netPD.js"></script>
  <script src="sensor.js"></script>
  <script src="car.js"></script>
  <script src="main.js"></script>

  
</body>

</html>
<script>
  function openOsmPanel() {
    osmPanel.style.display = "block";
  }
  function closeOsmPanel() {
    osmPanel.style.display = "none";
  }
  function parseOsmData() {
    if (osmDataContainer.values == "") {
      alert("Paste data first");
      return; ssssss
    }
    const res = Osm.parseRoads(JSON.parse(osmDataContainer.value));
    graph.points = res.points;
    graph.segments = res.segments;
    closeOsmPanel();
  }

  function onMapChange() {
    const mapSelect = document.getElementById('mapSelect');
    const subMapSelect = document.getElementById('subMapSelect');
    let options = '';
    switch (mapSelect.value) {
      case 'map8':
        options = `
        <option value="">è«‹é¸æ“‡è¡Œæ”¿å–®ä½</option>
        <option value="AC">è³‡è¨Šä¸­å¿ƒ</option>
        <option value="AD">è¡Œæ”¿ä¸­å¿ƒ</option>
        <option value="ART">è—è¡“ä¸­å¿ƒ</option>
        <option value="TL">åœ–æ›¸é¤¨</option>
        <option value="AS">é›²æ³°è½</option>
        <option value="GA">å­¸ç”Ÿæ´»å‹•ä¸­å¿ƒ</option>
      `;
        break;
      case 'map1':
        options = `
        <option value="">è«‹é¸æ“‡ç³»é¤¨</option>
        <option value="EM">å·¥ç¨‹ä¸€é¤¨</option>
        <option value="EL">å·¥ç¨‹äºŒé¤¨</option>
        <option value="ES">å·¥ç¨‹ä¸‰é¤¨</option>
        <option value="EC">å·¥ç¨‹å››é¤¨</option>
        <option value="EB">å·¥ç¨‹äº”é¤¨</option>
        <option value="EN">å·¥ç¨‹å…­é¤¨</option>
      `;
        break;
      case 'map2':
        options = `
        <option value="">è«‹é¸æ“‡ç³»é¤¨</option>
        <option value="DC1">è¨­è¨ˆä¸€é¤¨</option>
        <option value="DC2">è¨­è¨ˆäºŒé¤¨</option>
        <option value="DA">è¨­è¨ˆä¸‰é¤¨</option>
      `;
        break;
      case 'map3':
        options = `
        <option value="">è«‹é¸æ“‡ç³»é¤¨</option>
        <option value="MA">ç®¡ç†ä¸€é¤¨</option>
        <option value="MB">ç®¡ç†äºŒé¤¨</option>
        <option value="MD">ç®¡ç†ä¸‰é¤¨</option>
      `;
        break;
      case 'map4':
        options = `
        <option value="">è«‹é¸æ“‡ç³»é¤¨</option>
        <option value="DH">äººæ–‡ä¸€é¤¨</option>
        <option value="DS">äººæ–‡äºŒé¤¨</option>
      `;
        break;
      case 'map5':
        options = `
        <option value="">è«‹é¸æ“‡ç³»é¤¨</option>
        <option value="FB">æœªä¾†å­¸é™¢ä¸€é¤¨</option>
        <option value="FB2">æœªä¾†å­¸é™¢äºŒé¤¨</option>
      `;
        break;
      case 'map6':
        options = `
        <option value="">è«‹é¸æ“‡å®¿èˆå€åŸŸ</option>
        <option value="A">å­¸ç”Ÿå®¿èˆAå€</option>
        <option value="B">å­¸ç”Ÿå®¿èˆBå€</option>
        <option value="C">å­¸ç”Ÿå®¿èˆCå€</option>
        <option value="D">å­¸ç”Ÿå®¿èˆDå€</option>
        <option value="E">å­¸ç”Ÿå®¿èˆEå€</option>
        <option value="F">å­¸ç”Ÿå®¿èˆFå€</option>
        <option value="G">å­¸ç”Ÿå®¿èˆGå€</option>
      `;
        break;
      case 'map7':
        options = `
        <option value="">è«‹é¸æ“‡é‹å‹•å€åŸŸ</option>
        <option value="PD">é«”è‚²é¤¨</option>
        <option value="ASP">æ¸¸æ³³é¤¨</option>
        <option value="BK">ç±ƒçƒå ´</option>
        <option value="VB">æ’çƒå ´</option>
        <option value="BS">æ£’çƒå ´</option>
        <option value="SR">æºœå†°å ´</option>
        <option value="T">ç”°å¾‘å ´</option>
        

      `;
        break;
      default:
        options = '';
    }
    if (options) {
      subMapSelect.innerHTML = options;
      subMapSelect.style.display = '';
    } else {
      subMapSelect.innerHTML = '';
      subMapSelect.style.display = 'none';
    }
  }

  // å®šç¾©åœ°é»å°æ‡‰çš„å»ºç¯‰ç‰©åç¨±
  const buildingMap = {
    AC: "è³‡è¨Šä¸­å¿ƒ",
    AD: "è¡Œæ”¿ä¸­å¿ƒ",
    ART: "è—è¡“ä¸­å¿ƒ",
    TL: "åœ–æ›¸é¤¨",
    AS: "é›²æ³°è½",
    EM: "å·¥ç¨‹ä¸€é¤¨",
    EL: "å·¥ç¨‹äºŒé¤¨",
    ES: "å·¥ç¨‹ä¸‰é¤¨",
    EC: "å·¥ç¨‹å››é¤¨",
    EB: "å·¥ç¨‹äº”é¤¨",
    EN: "å·¥ç¨‹å…­é¤¨",
    DC1: "è¨­è¨ˆä¸€é¤¨",
    DC2: "è¨­è¨ˆäºŒé¤¨",
    DA: "è¨­è¨ˆä¸‰é¤¨",
    MA: "ç®¡ç†ä¸€é¤¨",
    MB: "ç®¡ç†äºŒé¤¨",
    MD: "ç®¡ç†ä¸‰é¤¨",
    DH: "äººæ–‡ä¸€é¤¨",
    DS: "äººæ–‡äºŒé¤¨",
    FB: "æœªä¾†å­¸é™¢ä¸€é¤¨",
    FB2: "æœªä¾†å­¸é™¢äºŒé¤¨",
    A: "å­¸ç”Ÿå®¿èˆAå€",
    B: "å­¸ç”Ÿå®¿èˆBå€",
    C: "å­¸ç”Ÿå®¿èˆCå€",
    D: "å­¸ç”Ÿå®¿èˆDå€",
    E: "å­¸ç”Ÿå®¿èˆEå€",
    F: "å­¸ç”Ÿå®¿èˆFå€",
    G: "å­¸ç”Ÿå®¿èˆGå€",
    PD: "é«”è‚²é¤¨",
    ASP: "æ¸¸æ³³é¤¨",
    BK: "ç±ƒçƒå ´",
    VB: "æ’çƒå ´",
    BS: "æ£’çƒå ´",
    SR: "æºœå†°å ´",
    T: "ç”°å¾‘å ´",
    GA:"å­¸ç”Ÿæ´»å‹•ä¸­å¿ƒ"
  };

  // å®šç¾©å°èˆªåŠŸèƒ½
  function navigateToDestination() {
    const input = document.getElementById("destinationInput").value.trim().toUpperCase();
    let buildingCodeRaw = input.match(/^[A-Z]+[0-9]*/); // ä¾‹å¦‚ FB205, DC1101, EB305 ç­‰

    if (!buildingCodeRaw) {
      alert("æ‰¾ä¸åˆ°ç›®æ¨™åœ°é»ï¼Œè«‹ç¢ºèªè¼¸å…¥æ˜¯å¦æ­£ç¢ºï¼");
      return;
    }

    let buildingCode = buildingCodeRaw[0];
    let floor = "æœªçŸ¥æ¨“å±¤";

    // ç‰¹æ®Šå»ºç¯‰ç¢¼å‰ç¶´
    const specialPrefixes = ["FB2", "DC1", "DC2"];
    const isSpecial = specialPrefixes.some(prefix =>
      buildingCode.startsWith(prefix) && input.length >= 6
    );

    if (isSpecial) {
      buildingCode = buildingCode.substring(0, 3); // ç‰¹ä¾‹å»ºç¯‰å–å‰ä¸‰ç¢¼
      if (input.length >= 4) {
        floor = `${input[3]}æ¨“`; // ç‰¹ä¾‹æ¨“å±¤åœ¨ç¬¬4å€‹å­—å…ƒ
      }
    } else {
      // ä¸€èˆ¬å»ºç¯‰ç‰©è™•ç†
      buildingCode = buildingCode.match(/^[A-Z]+/)[0]; // å–å­—æ¯éƒ¨åˆ†
      const numberPart = input.match(/[0-9]+/);
      if (numberPart && numberPart[0].length >= 1) {
        floor = `${numberPart[0][0]}æ¨“`; // æ¨™æº–æ¨“å±¤ç‚ºæ•¸å­—ç¬¬ä¸€ä½
      }
    }

    if (buildingMap[buildingCode]) {
      const buildingName = buildingMap[buildingCode];
      alert(`å°èˆªè‡³ ${buildingName}ï¼Œåœ°é»ï¼š${input}ï¼Œæ¨“å±¤ï¼š${floor}`);
      simulateSelection(buildingCode);
      triggerShortestPath(buildingCode);
    } else {
      alert("æ‰¾ä¸åˆ°ç›®æ¨™åœ°é»ï¼Œè«‹ç¢ºèªè¼¸å…¥æ˜¯å¦æ­£ç¢ºï¼");
    }
  }

  // æ¨¡æ“¬æ‰‹å‹•é¸æ“‡çš„è¡Œç‚º
  function simulateSelection(buildingCode) {
    const mapSelect = document.getElementById("mapSelect");
    const subMapSelect = document.getElementById("subMapSelect");

    // æ ¹æ“šå»ºç¯‰ç‰©ä»£ç¢¼é¸æ“‡å°æ‡‰çš„å­¸é™¢
    if (["EM", "EL", "ES", "EC", "EB", "EN"].includes(buildingCode)) {
      mapSelect.value = "map1"; // å·¥ç¨‹å­¸é™¢
    } else if (["DC1", "DC2", "DA"].includes(buildingCode)) {
      mapSelect.value = "map2"; // è¨­è¨ˆå­¸é™¢
    } else if (["MA", "MB", "MD"].includes(buildingCode)) {
      mapSelect.value = "map3"; // ç®¡ç†å­¸é™¢
    } else if (["DH", "DS"].includes(buildingCode)) {
      mapSelect.value = "map4"; // äººæ–‡å­¸é™¢
    } else if (["FB", "FB2"].includes(buildingCode)) {
      mapSelect.value = "map5"; // æœªä¾†å­¸é™¢
    } else if (["A", "B", "C", "D", "E", "F"].includes(buildingCode)) {
      mapSelect.value = "map6"; // å®¿èˆå€
    } else if (["PD", "ASP", "BK", "VB", "BS", "SR", "T"].includes(buildingCode)) {
      mapSelect.value = "map7"; // é‹å‹•å€
    } else if (["AC", "AD", "ART", "TL", "AS","GA"].includes(buildingCode)) {
      mapSelect.value = "map8"; // è¡Œæ”¿å–®ä½
    } else {
      alert("ç„¡æ³•åŒ¹é…åˆ°å°æ‡‰çš„å­¸é™¢ï¼");
      return;
    }

    // è§¸ç™¼å­¸é™¢é¸æ“‡çš„è®Šæ›´äº‹ä»¶ï¼Œé¡¯ç¤ºå­é¸å–®
    onMapChange();

    onMapChange();

    // æ ¹æ“šå»ºç¯‰ç‰©ä»£ç¢¼é¸æ“‡å°æ‡‰çš„å­é¸å–®é …ç›®
    subMapSelect.value = buildingCode;

    // è§¸ç™¼å­é¸å–®çš„è®Šæ›´äº‹ä»¶
    subMapSelect.dispatchEvent(new Event("change"));


  }

  // è§¸ç™¼æœ€çŸ­è·¯å¾‘è¨ˆç®—
  function triggerShortestPath(buildingCode) {
    // å‡è¨­æœ‰ä¸€å€‹å‡½æ•¸ `calculateShortestPath` ç”¨æ–¼è¨ˆç®—æœ€çŸ­è·¯å¾‘
    if (typeof calculateShortestPath === "function") {
      calculateShortestPath(buildingCode);
    } else {
      console.error("æœ€çŸ­è·¯å¾‘è¨ˆç®—å‡½æ•¸æœªå®šç¾©ï¼");
    }
  }
  // function toggleMoreMenu(event) {
  //   event.preventDefault();
  //   event.stopPropagation();
  //   const menu = document.getElementById('moreMenu');
  //   menu.style.display = (menu.style.display === 'block') ? 'none' : 'block';
  //   document.addEventListener('click', function handler(e) {
  //     if (!menu.contains(e.target) && e.target !== event.target) {
  //       menu.style.display = 'none';
  //       document.removeEventListener('click', handler);
  //       document.getElementById('engSubMenu').style.display = 'none';
  //       document.getElementById('designSubMenu').style.display = 'none';
  //       document.getElementById('mangeSubMenu').style.display = 'none';
  //     }
  //   });
  // }

  function toggleMangeSubMenu(event) {
    event.preventDefault();
    event.stopPropagation();
    const submenu = document.getElementById('mangeSubMenu');
    // å…ˆé—œé–‰å…¶ä»–å­é¸å–®
    document.getElementById('engSubMenu').style.display = 'none';
    document.getElementById('designSubMenu').style.display = 'none';
    document.getElementById('hasSubMenu').style.display = 'none';
    document.getElementById('futSubMenu').style.display = 'none';
    // åˆ‡æ›è‡ªå·±
    submenu.style.display = (submenu.style.display === 'block') ? 'none' : 'block';

    document.addEventListener('click', function handler(e) {
      if (!submenu.contains(e.target) && e.target !== event.target) {
        submenu.style.display = 'none';
        document.removeEventListener('click', handler);
      }
    });
  }

  function toggleDesignSubMenu(event) {
    event.preventDefault();
    event.stopPropagation();
    const submenu = document.getElementById('designSubMenu');
    // å…ˆé—œé–‰æ‰€æœ‰å­é¸å–®
    document.getElementById('engSubMenu').style.display = 'none';
    document.getElementById('mangeSubMenu').style.display = 'none';
    document.getElementById('hasSubMenu').style.display = 'none';
    document.getElementById('futSubMenu').style.display = 'none';
    // åˆ‡æ›è‡ªå·±
    submenu.style.display = (submenu.style.display === 'block') ? 'none' : 'block';

    document.addEventListener('click', function handler(e) {
      if (!submenu.contains(e.target) && e.target !== event.target) {
        submenu.style.display = 'none';
        document.removeEventListener('click', handler);
      }
    });
  }

  function toggleSubMenu(event) {
    event.preventDefault();
    event.stopPropagation();
    const submenu = document.getElementById('engSubMenu');
    // å…ˆé—œé–‰å…¶ä»–å­é¸å–®
    document.getElementById('designSubMenu').style.display = 'none';
    document.getElementById('mangeSubMenu').style.display = 'none';
    document.getElementById('hasSubMenu').style.display = 'none';
    document.getElementById('futSubMenu').style.display = 'none';
    // åˆ‡æ›è‡ªå·±
    submenu.style.display = (submenu.style.display === 'block') ? 'none' : 'block';

    document.addEventListener('click', function handler(e) {
      if (!submenu.contains(e.target) && e.target !== event.target) {
        submenu.style.display = 'none';
        document.removeEventListener('click', handler);
      }
    });
  }

  function toggleHasSubMenu(event) {
    event.preventDefault();
    event.stopPropagation();
    const submenu = document.getElementById('hasSubMenu');
    // å…ˆé—œé–‰å…¶ä»–å­é¸å–®
    document.getElementById('engSubMenu').style.display = 'none';
    document.getElementById('designSubMenu').style.display = 'none';
    document.getElementById('mangeSubMenu').style.display = 'none';
    document.getElementById('futSubMenu').style.display = 'none';
    // åˆ‡æ›è‡ªå·±
    submenu.style.display = (submenu.style.display === 'block') ? 'none' : 'block';
    document.addEventListener('click', function handler(e) {
      if (!submenu.contains(e.target) && e.target !== event.target) {
        submenu.style.display = 'none';
        document.removeEventListener('click', handler);
      }
    });
  }

  function toggleFutSubMenu(event) {
    event.preventDefault();
    event.stopPropagation();
    const submenu = document.getElementById('futSubMenu');
    // å…ˆé—œé–‰å…¶ä»–å­é¸å–®
    document.getElementById('engSubMenu').style.display = 'none';
    document.getElementById('designSubMenu').style.display = 'none';
    document.getElementById('mangeSubMenu').style.display = 'none';
    document.getElementById('hasSubMenu').style.display = 'none';
    // åˆ‡æ›è‡ªå·±
    submenu.style.display = (submenu.style.display === 'block') ? 'none' : 'block';
    document.addEventListener('click', function handler(e) {
      if (!submenu.contains(e.target) && e.target !== event.target) {
        submenu.style.display = 'none';
        document.removeEventListener('click', handler);
      }
    });
  }

  function toggleShopMenu(event) {
    event.preventDefault();
    event.stopPropagation();
    const menu = document.getElementById('shopMenu');
    const overlay = document.getElementById('shopOverlay');
    const show = menu.style.display !== 'block';
    menu.style.display = show ? 'block' : 'none';
    overlay.style.display = show ? 'block' : 'none';

    // å…ˆç§»é™¤èˆŠçš„ç›£è½ï¼Œé¿å…é‡è¤‡
    overlay.onclick = null;

    if (show) {
      // é»æ“Šé®ç½©æ™‚é—œé–‰
      overlay.onclick = function () {
        menu.style.display = 'none';
        overlay.style.display = 'none';
      };
      // é»æ“Šæ–¹æ¡†å…§éƒ¨ä¸é—œé–‰
      menu.onclick = function (e) {
        e.stopPropagation();
      };
    }
  }

  function selectCarImage(src) {
    if (window.myCar) {
      window.myCar.img.src = src;
      console.log(window.myCar.img.src)

      const maskCtx = myCar.mask.getContext("2d");
      myCar.img.onload = () => {
        maskCtx.clearRect(0, 0, myCar.width, myCar.height);
        maskCtx.fillStyle = myCar.color || "blue";
        maskCtx.rect(0, 0, myCar.width, myCar.height);
        maskCtx.fill();
        maskCtx.globalCompositeOperation = "destination-atop";
        maskCtx.drawImage(myCar.img, 0, 0, myCar.width, myCar.height);
        if (typeof animate === "function") animate();
      };
    }
    document.getElementById('shopMenu').style.display = 'none';
    document.getElementById('shopOverlay').style.display = 'none';
  }
function openHelp(event) {
    event.preventDefault();
    document.getElementById('helpOverlay').style.display = 'block';
    document.getElementById('helpBox').style.display = 'block';
  }
  function showHelpPage1() {
    document.getElementById('helpBox2').style.display = 'none';
    document.getElementById('helpBox').style.display = 'block';
    document.getElementById('helpOverlay').style.zIndex = 9998;
  }
function closeHelp() {
  document.getElementById('helpOverlay').style.display = 'none';
  document.getElementById('helpBox').style.display = 'none';
}
function showHelpPage2() {
  document.getElementById('helpBox').style.display = 'none';
  document.getElementById('helpBox3').style.display = 'none'; 
  document.getElementById('helpBox2').style.display = 'block';
  document.getElementById('helpOverlay').style.zIndex = 9998;
}
function closeHelp2() {
  document.getElementById('helpOverlay').style.display = 'none';
  document.getElementById('helpBox2').style.display = 'none';
}
function showHelpPage3() {
  document.getElementById('helpBox2').style.display = 'none';
  document.getElementById('helpBox4').style.display = 'none'; 
  document.getElementById('helpBox3').style.display = 'block';
  document.getElementById('helpOverlay').style.zIndex = 9998;
}
function closeHelp3() {
  document.getElementById('helpOverlay').style.display = 'none';
  document.getElementById('helpBox3').style.display = 'none';
}
function showHelpPage4() {
  document.getElementById('helpBox3').style.display = 'none';
  document.getElementById('helpBox5').style.display = 'none'; 
  document.getElementById('helpBox4').style.display = 'block';
  document.getElementById('helpOverlay').style.zIndex = 9998;
}
function closeHelp4() {
  document.getElementById('helpOverlay').style.display = 'none';
  document.getElementById('helpBox4').style.display = 'none';
}
function showHelpPage5() {
  document.getElementById('helpBox4').style.display = 'none';
  document.getElementById('helpBox6').style.display = 'none';
  document.getElementById('helpBox5').style.display = 'block';
  document.getElementById('helpOverlay').style.zIndex = 9998;
}
function closeHelp5() {
  document.getElementById('helpOverlay').style.display = 'none';
  document.getElementById('helpBox5').style.display = 'none';
}
function showHelpPage6() {
  document.getElementById('helpBox5').style.display = 'none';
  document.getElementById('helpBox7').style.display = 'none'; 
  document.getElementById('helpBox6').style.display = 'block';
  document.getElementById('helpOverlay').style.zIndex = 9998;
}
function closeHelp6() {
  document.getElementById('helpOverlay').style.display = 'none';
  document.getElementById('helpBox6').style.display = 'none';
}
function showHelpPage7() {
  document.getElementById('helpBox6').style.display = 'none';
  document.getElementById('helpBox8').style.display = 'none';
  document.getElementById('helpBox7').style.display = 'block';
  document.getElementById('helpOverlay').style.zIndex = 9998;
}
function closeHelp7() {
  document.getElementById('helpOverlay').style.display = 'none';
  document.getElementById('helpBox7').style.display = 'none';
}
function showHelpPage8() {
  document.getElementById('helpBox7').style.display = 'none';
  document.getElementById('helpBox8').style.display = 'block';
  document.getElementById('helpOverlay').style.zIndex = 9998;
}
function closeHelp8() {
  document.getElementById('helpOverlay').style.display = 'none';
  document.getElementById('helpBox8').style.display = 'none';
}

function showAnnouncement() {
  document.getElementById('announcementOverlay').style.display = 'flex';
}

function closeAnnouncement() {
  document.getElementById('announcementOverlay').style.display = 'none';
}

window.onload = function() {
  showAnnouncement();
};

</script>